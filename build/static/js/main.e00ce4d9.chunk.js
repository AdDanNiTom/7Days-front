(this["webpackJsonpproject-management-client"]=this["webpackJsonpproject-management-client"]||[]).push([[0],{142:function(e,t,n){},143:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(24),o=n.n(i),s=(n(142),n(143),n(144),n(18)),r=n(16),l=n(7),j=n(15),u=n.n(j),b=n(1),d=c.a.createContext();function h(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(!0),s=Object(l.a)(o,2),r=s[0],j=s[1],h=Object(a.useState)(!1),p=Object(l.a)(h,2),O=p[0],x=p[1],m=Object(a.useState)(null),v=Object(l.a)(m,2),f=v[0],g=v[1],S=function(){var e=localStorage.getItem("authToken");e?u.a.get("".concat("https://seven-app-api.herokuapp.com","/auth/verify"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var t=e.data;g(t),i(!0),j(!1)})).catch((function(e){g(null),i(!1),j(!1)})):j(!1)};return Object(a.useEffect)((function(){S()}),[]),Object(b.jsx)(d.Provider,{value:{logInUser:function(e){localStorage.setItem("authToken",e),S()},logOutUser:function(){localStorage.removeItem("authToken"),i(!1),g(null)},user:f,isLoggedIn:c,isLoading:r,error:O,setError:x},children:e.children})}var p=function(e){var t=e.text,n=e.page,c=e.view,i=Object(a.useContext)(d).user,o=null;return o="profile"===n?i?"/profile/"+i._id:"/":"/"+n+"?view="+c,Object(b.jsx)("li",{className:"nav-item d-flex align-items-end",children:Object(b.jsxs)(r.b,{className:"text-decoration-none text-light",to:o,children:[e.children,Object(b.jsx)("p",{className:"border-bottom fw-light",children:t})]})})},O=n(238);var x=function(){return Object(b.jsx)(O.a,{animation:"border",variant:"primary"})},m=n(239),v=n(240),f=n(241);var g=function(){return Object(a.useContext)(d).isLoading?Object(b.jsx)(x,{}):Object(b.jsx)("nav",{className:"navbar position-fixed zindex-fixed bottom-0 w-100 navbar-dark bg-dark",style:{zIndex:3},children:Object(b.jsxs)("ul",{className:"nav justify-content-evenly w-100",children:[Object(b.jsx)(p,{text:"Map",page:"events",view:"map",children:Object(b.jsx)(m.a,{size:20})}),Object(b.jsx)(p,{text:"Events",page:"events",view:"list",children:Object(b.jsx)(v.a,{size:20})}),Object(b.jsx)(p,{text:"Profile",page:"profile",state:null,children:Object(b.jsx)(f.a,{size:20})})]})})},S=n(242),y=n(251);function w(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(s.i)().id;console.log("id: ",o);return Object(a.useEffect)((function(){!function(){var e=localStorage.getItem("authToken");u.a.get("".concat("https://seven-app-api.herokuapp.com","/api/events/").concat(o),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var t=e.data.data;i(t)})).catch((function(e){return console.log(e)}))}()}),[]),Object(b.jsx)("div",{children:c&&Object(b.jsx)(S.a,{className:"m-3",children:Object(b.jsxs)(y.a,{className:"p-0",children:[Object(b.jsx)(y.a.Header,{children:Object(b.jsx)(y.a.Title,{children:c.title})}),Object(b.jsxs)(y.a.Body,{children:[Object(b.jsx)(y.a.Title,{children:Object(b.jsx)("h3",{children:c.icon})}),Object(b.jsx)(y.a.Subtitle,{children:Object(b.jsxs)(r.b,{to:"/profile/"+c.owner._id,children:["@",c.owner.username]})}),Object(b.jsx)(y.a.Text,{children:c.address}),Object(b.jsx)(y.a.Text,{children:c.description}),Object(b.jsxs)(y.a.Text,{children:[c.attendees.length>0&&Object(b.jsx)("p",{children:"Attendees:"}),c.attendees.map((function(e){return Object(b.jsx)("p",{children:e.username})}))]})]})]})})})}var C="https://seven-app-api.herokuapp.com";function k(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(""),j=Object(l.a)(o,2),d=j[0],h=j[1],p=Object(s.g)(),O=Object(s.i)().id;Object(a.useEffect)((function(){var e=localStorage.getItem("authToken");u.a.get("".concat(C,"/api/events/").concat(O),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var t=e.data.data;i(t.title),h(t.description)})).catch((function(e){return console.log(e)}))}),[O]);return Object(b.jsxs)("div",{className:"EditEventPage",children:[Object(b.jsx)("h3",{children:"Edit the Event"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={title:c,description:d},a=localStorage.getItem("authToken");u.a.put("".concat(C,"/api/events/").concat(O),n,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){e.history.push("/events/".concat(O))}))},children:[Object(b.jsx)("label",{children:"Title:"}),Object(b.jsx)("input",{type:"text",name:"title",value:c,onChange:function(e){return i(e.target.value)}}),Object(b.jsx)("label",{children:"Description:"}),Object(b.jsx)("textarea",{name:"description",value:d,onChange:function(e){return h(e.target.value)}}),Object(b.jsx)("button",{type:"submit",children:"Update Event"})]}),Object(b.jsx)("button",{onClick:function(){var e=localStorage.getItem("authToken");u.a.delete("".concat(C,"/api/events/").concat(O),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(){return p.push("/events")})).catch((function(e){return console.log(e)}))},children:"Delete Event"}),Object(b.jsx)(r.b,{className:"btn btn-primary",to:"/events",children:"Back to Events"})]})}function N(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useContext)(d),o=i.user,j=i.logOutUser,h=Object(s.i)().id;return Object(a.useEffect)((function(){o&&u.a.get("".concat("https://seven-app-api.herokuapp.com","/api/users/").concat(h)).then((function(e){c(e.data.data)}))}),[o]),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:!n&&Object(b.jsx)("p",{children:"Loading"})}),Object(b.jsx)("div",{children:n&&Object(b.jsxs)("div",{className:"Profile card",style:{maxWidth:"400px"},children:[Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:n.profilePhoto,alt:"Profile"})}),Object(b.jsxs)("p",{children:["@",n.username]}),Object(b.jsxs)("p",{children:[n.firstName," ",n.lastName]}),Object(b.jsx)("p",{children:n.biography}),Object(b.jsx)(r.b,{to:"/profile/edit",children:Object(b.jsx)("button",{children:"Edit profile"})}),Object(b.jsx)("button",{onClick:j,children:"Logout"})]})})]})}var T=n(25),E=n(5),I="https://seven-app-api.herokuapp.com";var A=function(e){var t=Object(a.useState)({firstName:"",lastName:"",biography:""}),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useContext)(d).user;Object(a.useEffect)((function(){o&&u.a.get("".concat(I,"/api/users/").concat(o._id)).then((function(e){var t=e.data.data,n=t.firstName,a=t.lastName,c=t.biography;i({firstName:n,lastName:a,biography:c})}))}),[o]);var s=function(e){i(Object(E.a)(Object(E.a)({},c),{},Object(T.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)("div",{className:"EditProjectPage",children:[Object(b.jsxs)("h3",{children:["Edit Profile - ",o.username]}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={firstName:c.firstName,lastName:c.lastName,biography:c.biography};u.a.put("".concat(I,"/api/users/").concat(o._id),n).then((function(t){e.history.push("/")}))},children:[Object(b.jsx)("label",{children:"First Name:"}),Object(b.jsx)("input",{type:"text",name:"firstName",value:c.firstName,onChange:s}),Object(b.jsx)("label",{children:"Last Name:"}),Object(b.jsx)("textarea",{name:"lastName",value:c.lastName,onChange:s}),Object(b.jsx)("label",{children:"Biography:"}),Object(b.jsx)("textarea",{name:"biography",value:c.biography,onChange:s}),Object(b.jsx)("button",{type:"submit",children:"Update Profile"})]}),Object(b.jsx)("button",{onClick:function(){u.a.delete("".concat(I,"/api/users/").concat(o._id)).then((function(t){e.history.push("/")}))},children:"Delete Account"})]})};var _=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(""),s=Object(l.a)(o,2),j=s[0],d=s[1],h=Object(a.useState)(""),p=Object(l.a)(h,2),O=p[0],x=p[1],m=Object(a.useState)(void 0),v=Object(l.a)(m,2),f=v[0],g=v[1];return Object(b.jsxs)("div",{className:"SignupPage",children:[Object(b.jsx)("h1",{children:"Sign Up"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={email:c,password:j,username:O};u.a.post("".concat("https://seven-app-api.herokuapp.com","/auth/signup"),n).then((function(t){return e.history.push("/login")})).catch((function(e){var t=e.response.data.message;g(t)}))},children:[Object(b.jsx)("label",{children:"Email:"}),Object(b.jsx)("input",{type:"text",name:"email",value:c,onChange:function(e){return i(e.target.value)}}),Object(b.jsx)("label",{children:"Password:"}),Object(b.jsx)("input",{type:"password",name:"password",value:j,onChange:function(e){return d(e.target.value)}}),Object(b.jsx)("label",{children:"Username:"}),Object(b.jsx)("input",{type:"text",name:"username",value:O,onChange:function(e){return x(e.target.value)}}),Object(b.jsx)("button",{type:"submit",children:"Sign Up"})]}),f&&Object(b.jsx)("p",{className:"error-message",children:f}),Object(b.jsx)("p",{children:"Already have account?"}),Object(b.jsx)(r.b,{to:"/login",children:" Login"})]})};var L=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(""),s=Object(l.a)(o,2),j=s[0],h=s[1],p=Object(a.useState)(void 0),O=Object(l.a)(p,2),x=O[0],m=O[1],v=Object(a.useContext)(d).logInUser;return Object(b.jsxs)("div",{className:"LoginPage",children:[Object(b.jsx)("h1",{children:"Login"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={email:c,password:j};u.a.post("".concat("https://seven-app-api.herokuapp.com","/auth/login"),n).then((function(t){console.log("JWT token",t.data.authToken);var n=t.data.authToken;v(n),e.history.push("/events?view=list")})).catch((function(e){var t=e.response.data.message;m(t)}))},children:[Object(b.jsx)("label",{children:"Email:"}),Object(b.jsx)("input",{type:"text",name:"email",value:c,onChange:function(e){return i(e.target.value)}}),Object(b.jsx)("label",{children:"Password:"}),Object(b.jsx)("input",{type:"password",name:"password",value:j,onChange:function(e){return h(e.target.value)}}),Object(b.jsx)("button",{type:"submit",children:"Login"})]}),x&&Object(b.jsx)("p",{className:"error-message",children:x}),Object(b.jsx)("p",{children:"Don't have an account yet?"}),Object(b.jsx)(r.b,{to:"/signup",children:" Sign Up"})]})},D=n(11),z=["to","exact","component"];var B=function(e){var t=e.to,n=e.exact,c=e.component,i=Object(D.a)(e,z),o=Object(a.useContext)(d),r=o.isLoggedIn,l=o.isLoading,j=o.setError;return l?Object(b.jsx)(x,{}):r?Object(b.jsx)(s.b,Object(E.a)({to:t,exact:n,component:c},i)):(j(!0),Object(b.jsx)(s.a,{to:"/"}))},P=["to","exact","component"];var R=function(e){var t=e.to,n=e.exact,c=e.component,i=Object(D.a)(e,P),o=Object(a.useContext)(d),r=o.isLoggedIn;return o.isLoading?Object(b.jsx)("p",{children:"Loading ..."}):r?Object(b.jsx)(s.a,{to:"/events?view=list"}):Object(b.jsx)(s.b,Object(E.a)({to:t,exact:n,component:c},i))},W=n(121),F=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URI:"https://seven-app-api.herokuapp.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiYWRyaWFuYXJhbmRhIiwiYSI6ImNrd3hmdzZzbDBjemQydnBsaTllN215dmoifQ.lSWVa5b6Z14zxBXLkER_xQ"}).GOOGLE_CLIENT_ID||"534283558805-iaiv8vuujp7gaqcvqfrof8h2d460aqbs.apps.googleusercontent.com";var U=function(e){var t=Object(a.useContext)(d).logInUser;return Object(b.jsx)(W.GoogleLogin,{clientId:F,buttonText:"Login with Google",onSuccess:function(n){u.a.post("".concat("https://seven-app-api.herokuapp.com","/auth/googleLogin"),n.profileObj).then((function(n){var a=n.data.authToken;t(a),e.props.history.push("/events?view=list")})).catch((function(e){console.log(e)}))},onFailure:function(e){console.log("login failed",e)},cookiePolicy:"single_host_origin",isSignedIn:!1})};var Q=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),c=(n[0],n[1]),i=Object(a.useContext)(d).user;return Object(a.useEffect)((function(){i&&u.a.get("".concat("https://seven-app-api.herokuapp.com","/api/users/").concat(i._id)).then((function(t){c(t.data.data),e.history.push("/events")}))}),[i]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"7Days"}),Object(b.jsx)(U,{props:e}),Object(b.jsx)(r.b,{to:"/login",children:"Login"}),Object(b.jsx)(r.b,{to:"/signup",children:"Signup"})]})},Y=n(40),M=n(55),H=n(248),J=n(243),X=n(244);var V=function(e){var t=e.open,n=e.parentCb,a=e.textOpen,c=e.textClosed;return Object(b.jsxs)(y.a.Link,{onClick:function(){return n(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,children:[t&&Object(b.jsxs)(y.a.Text,{children:[Object(b.jsx)(J.a,{}),a]}),!t&&Object(b.jsxs)(y.a.Text,{children:[Object(b.jsx)(X.a,{}),c]})]})},Z=n(250);var G=function(e){var t=e.parentCb,n=e.filterState;return Object(b.jsxs)(Z.a,{children:[Object(b.jsx)(Z.a.Item,{onClick:function(){return t(null,n.category)},active:null===n.weekday,className:"pe-2",children:"ALL"}),["Su","M","T","W","Th","F","S"].map((function(e,a){return Object(b.jsx)(Z.a.Item,{onClick:function(){return t(a,n.category)},active:a===n.weekday,children:e},a)}))]})},q=n(249);function K(e){var t=e.parentCb,n=e.filterState;return Object(b.jsxs)(q.a.Select,{"aria-label":"Default select example",onChange:function(e){return t(n.weekday,e.target.value)},children:[Object(b.jsx)("option",{value:"all",children:"Show all"}),[{icon:"\ud83d\ude4b",name:"Open to plans"},{icon:"\ud83c\udf7a",name:"Drinks"},{icon:"\ud83e\udd58",name:"Food"},{icon:"\ud83d\udecd\ufe0f",name:"Shopping"},{icon:"\ud83c\udf89",name:"Clubbing"},{icon:"\u26bd",name:"Sports"},{icon:"\ud83e\uddd8",name:"Yoga"},{icon:"\ud83c\udfd6\ufe0f",name:"Beach"},{icon:"\ud83c\udfdb\ufe0f",name:"Art & Culture"},{icon:"\ud83c\udfa5",name:"Movies"},{icon:"\ud83c\udfb8",name:"Music"},{icon:"\ud83c\udfb2",name:"Board games"},{icon:"\ud83c\udfae",name:"Computer games"},{icon:"\ud83e\udd37",name:"Other"}].map((function(e){return Object(b.jsxs)("option",{value:e.icon,children:[e.icon,e.name]})}))]})}var $=n(246),ee=n(245),te=n(247),ne=n(37);function ae(e){var t=e._id,n=e.title,c=e.description,i=e.owner,o=e.location,s=e.attendees,j=e.icon,h=(e.date,e.maxAtendees,e.changeEffect),p=e.address,O=Object(a.useState)(!1),x=Object(l.a)(O,2),m=x[0],v=x[1],f=Object(a.useState)(!1),g=Object(l.a)(f,2),w=g[0],C=g[1],k=Object(a.useState)({latitude:o[1],longitude:o[0],height:window.innerHeight,width:window.innerWidth,zoom:14,pitch:15}),N=Object(l.a)(k,2),T=N[0],I=N[1],A=Object(a.useContext)(d).user;Object(a.useEffect)((function(){s.forEach((function(e){e._id===A._id&&v(!0)}))}),[m]);var _=function(e){e.preventDefault();var n=localStorage.getItem("authToken");u.a.put("".concat("https://seven-app-api.herokuapp.com","/api/events/").concat(t,"/attendees"),{userId:A._id},{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){!0===m&&v(!1),!1===m&&v(!0)})).catch((function(e){console.log(e)})),h()};return Object(b.jsx)(S.a,{className:"m-3",children:Object(b.jsxs)(y.a,{className:"p-0",children:[Object(b.jsxs)(y.a.Header,{className:"d-flex justify-content-between align-items-center",children:[Object(b.jsx)(ee.a,{size:30}),Object(b.jsx)(y.a.Title,{children:n}),m&&i._id!==A._id&&Object(b.jsx)($.a,{onClick:_,variant:"danger",children:"Leave"}),!m&&i._id!==A._id&&Object(b.jsx)($.a,{onClick:_,children:"Join"}),i._id===A._id&&Object(b.jsx)(r.b,{className:"btn btn-warning",to:"/events/edit/".concat(t),children:"Edit"})]}),Object(b.jsxs)(y.a.Body,{className:"d-flex flex-column justify-content-between align-items-center",children:[Object(b.jsx)(y.a.Title,{children:Object(b.jsx)("h3",{children:j})}),Object(b.jsx)(y.a.Subtitle,{className:"mb-2 text-muted",children:i?Object(b.jsxs)(r.b,{to:"/profile/"+i._id,children:["@",i.username]}):"Anonymous"}),Object(b.jsx)(H.a,{in:w,children:Object(b.jsxs)("div",{id:"example-collapse-text w-100",children:[Object(b.jsx)(y.a.Text,{children:p}),Object(b.jsx)("br",{}),2===o.length?Object(b.jsx)(ne.c,Object(E.a)(Object(E.a)({},T),{},{mapboxApiAccessToken:"pk.eyJ1IjoiYWRyaWFuYXJhbmRhIiwiYSI6ImNrd3hmdzZzbDBjemQydnBsaTllN215dmoifQ.lSWVa5b6Z14zxBXLkER_xQ",mapStyle:"mapbox://styles/mapbox/streets-v10",width:"100%",height:"30vh",onViewportChange:function(e){return I(e)},children:Object(b.jsx)(ne.a,{latitude:o[1],longitude:o[0],offsetLeft:5*-T.zoom/2,offsetTop:5*-T.zoom,children:Object(b.jsx)("img",{src:"https://cdn-icons.flaticon.com/png/512/2377/premium/2377922.png?token=exp=1639411308~hmac=3574f92bdbd79bd1d2546cd704409071",alt:"location",height:5*T.zoom,width:5*T.zoom})})})):Object(b.jsx)("img",{src:"https://cdn.iconscout.com/icon/premium/png-256-thumb/no-location-1-832962.png"})," ",Object(b.jsx)("br",{}),Object(b.jsx)(y.a.Text,{children:c?"Event Description: "+c:"No description available"}),Object(b.jsxs)("div",{children:[s.length>0&&Object(b.jsx)("p",{children:"Attendees:"}),s.map((function(e){return Object(b.jsx)("p",{children:e.username})}))]}),Object(b.jsxs)($.a,{className:"btn-light",onClick:function(){navigator.clipboard.writeText("https://app-seven.herokuapp.com/events/".concat(t))},children:[Object(b.jsx)(te.a,{size:20}),"Copy Event URL"]})]})}),Object(b.jsx)(V,{open:w,parentCb:C,textOpen:"Hide details",textClosed:"Show details"})]})]})})}var ce=function(e){var t=e.events,n=Object(a.useState)(!1),c=Object(l.a)(n,2),i=c[0],o=c[1];function s(){o(!i)}return Object(b.jsx)("div",{className:"container",children:t&&t.map((function(e){return Object(b.jsx)(ae,Object(E.a)(Object(E.a)({},e),{},{changeEffect:s}),e._id)}))})};var ie=function(e){var t=e.events,n=Object(a.useState)({latitude:41.38,longitude:2.16,height:window.innerHeight,width:window.innerWidth,zoom:11,pitch:15}),c=Object(l.a)(n,2),i=c[0],o=c[1],s=Object(a.useState)(null),r=Object(l.a)(s,2),j=r[0],u=r[1];return Object(b.jsxs)(ne.c,Object(E.a)(Object(E.a)({},i),{},{mapboxApiAccessToken:"pk.eyJ1IjoiYWRyaWFuYXJhbmRhIiwiYSI6ImNrd3hmdzZzbDBjemQydnBsaTllN215dmoifQ.lSWVa5b6Z14zxBXLkER_xQ",width:"100vw",height:"100vh",mapStyle:"mapbox://styles/mapbox/streets-v10",onViewportChange:function(e){return o(e)},onClick:function(e){e.preventDefault()},children:[null===t||void 0===t?void 0:t.map((function(e){if(2===e.location.length)return Object(b.jsx)(ne.a,{longitude:e.location[0],latitude:e.location[1],offsetLeft:5*-i.zoom/2,offsetTop:5*-i.zoom,children:Object(b.jsx)("button",{className:"icon-button",onClick:function(t){t.preventDefault(),u(e)},children:e.icon})},e.title)})),j?Object(b.jsx)(ne.b,{latitude:j.location[1],longitude:j.location[0],onClose:function(){u(null)},children:Object(b.jsxs)("div",{children:[Object(b.jsx)("br",{}),Object(b.jsxs)("h4",{children:[j.icon," ",j.title]}),Object(b.jsx)("p",{children:j.description}),Object(b.jsxs)("p",{children:["Host:",j.owner?"@"+j.owner.username:"Anonymous"]}),Object(b.jsxs)("p",{children:["Attendees:",Object(b.jsx)("ul",{children:j.attendees.map((function(e){return Object(b.jsx)("li",{children:e.username})}))})]})]})}):null]}))},oe=n(88),se=n.n(oe),re=(n(185),n(74)),le=n.n(re);le.a.setLanguage("en");function je(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(""),s=Object(l.a)(o,2),r=s[0],j=s[1],h=Object(a.useState)(""),p=Object(l.a)(h,2),O=p[0],x=p[1],m=Object(a.useState)(new Date),v=Object(l.a)(m,2),f=v[0],g=v[1],S=Object(a.useState)(""),y=Object(l.a)(S,2),w=y[0],C=y[1],k=Object(a.useState)(""),N=Object(l.a)(k,2),T=N[0],I=N[1],A=Object(a.useState)(new Date),_=Object(l.a)(A,2),L=_[0],D=_[1],z=Object(a.useState)(""),B=Object(l.a)(z,2),P=B[0],R=B[1],W=Object(a.useState)({latitude:41.38,longitude:2.16,height:window.innerHeight,width:window.innerWidth,zoom:11,pitch:15}),F=Object(l.a)(W,2),U=F[0],Q=F[1],Y=Object(a.useContext)(d).user;Object(a.useEffect)((function(){le.a.fromLatLng(T[1],T[0]).then((function(e){var t=e.results[0].formatted_address;console.log(t),R(t)}),(function(e){console.error(e)}))}),[T]);return Object(b.jsxs)("div",{className:"AddEvent",children:[Object(b.jsx)("h3",{children:"Add Event"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=L.toTimeString(),a={title:c,description:r,owner:Y._id,icon:O,eventDate:f,maxAtendees:w,location:T,address:P,time:n};console.log("reqBody is: ",a);var o=localStorage.getItem("authToken");u.a.post("".concat("https://seven-app-api.herokuapp.com","/api/events"),a,{headers:{Authorization:"Bearer ".concat(o)}}).then((function(t){i(""),j(""),x(""),C(""),g(""),e.refreshEvents()})).catch((function(e){return console.log(e)}))},children:[Object(b.jsx)("button",{type:"submit",children:"Submit"}),Object(b.jsx)("label",{children:"Title:"}),Object(b.jsx)("input",{type:"text",name:"title",value:c,onChange:function(e){return i(e.target.value)}}),Object(b.jsx)("label",{children:"Description:"}),Object(b.jsx)("textarea",{type:"text",name:"description",value:r,onChange:function(e){return j(e.target.value)}}),Object(b.jsx)("label",{children:"Category:"}),Object(b.jsxs)("select",{id:"emoji-dropdown",name:"icon",onChange:function(e){return x(e.target.value)},children:[Object(b.jsx)("option",{value:"\ud83d\ude4b",children:"\ud83d\ude4b Open to plans"}),Object(b.jsx)("option",{children:"Choose a category"}),Object(b.jsx)("option",{value:"\ud83c\udf7a",children:"\ud83c\udf7a Drinks"}),Object(b.jsx)("option",{value:"\u2615",children:"\u2615 Coffee"}),Object(b.jsx)("option",{value:"\ud83e\udd58",children:"\ud83e\udd58 Food"}),Object(b.jsx)("option",{value:"\ud83d\udecd\ufe0f",children:"\ud83d\udecd\ufe0f Shopping"}),Object(b.jsx)("option",{value:"\ud83c\udf89",children:"\ud83c\udf89 Clubbing"}),Object(b.jsx)("option",{value:"\u26bd",children:"\u26bd Sports"}),Object(b.jsx)("option",{value:"\ud83e\uddd8",children:"\ud83e\uddd8 Yoga"}),Object(b.jsx)("option",{value:"\ud83c\udfd6\ufe0f",children:"\ud83c\udfd6\ufe0f Beach"}),Object(b.jsx)("option",{value:"\ud83c\udfdb\ufe0f",children:"\ud83c\udfdb\ufe0f Art & Culture"}),Object(b.jsx)("option",{value:"\ud83c\udfa5 ",children:"\ud83c\udfa5 Movies"}),Object(b.jsx)("option",{value:"\ud83c\udfb8",children:"\ud83c\udfb8 Music"}),Object(b.jsx)("option",{value:"\ud83c\udfb2",children:"\ud83c\udfb2 Board games"}),Object(b.jsx)("option",{value:"\ud83c\udfae",children:"\ud83c\udfae Computer games"}),Object(b.jsx)("option",{value:"\ud83e\udd37",children:"\ud83e\udd37 Other"})]}),Object(b.jsx)("label",{children:"Date:"}),Object(b.jsx)(se.a,{className:"datepicker",selected:f,onChange:function(e){return g(e)},name:"eventDate",value:f,minDate:new Date,maxDate:new Date((new Date).setDate((new Date).getDate()+6)),dateFormat:"MMMM d, yyyy"}),Object(b.jsx)("label",{children:"Time:"}),Object(b.jsx)(se.a,{selected:L,onChange:function(e){return D(e)},showTimeSelect:!0,name:"time",value:L,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"h:mm aa"}),Object(b.jsx)("label",{children:"Max Atendees:"}),Object(b.jsx)("input",{type:"number",name:"maxAtendees",value:w,onChange:function(e){return C(e.target.value)}}),Object(b.jsxs)("div",{children:["Address: ",P]}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"minimap",children:Object(b.jsx)(ne.c,Object(E.a)(Object(E.a)({},U),{},{mapboxApiAccessToken:"pk.eyJ1IjoiYWRyaWFuYXJhbmRhIiwiYSI6ImNrd3hmdzZzbDBjemQydnBsaTllN215dmoifQ.lSWVa5b6Z14zxBXLkER_xQ",mapStyle:"mapbox://styles/mapbox/streets-v10",width:"100%",height:"100%",onViewportChange:function(e){return Q(e)},onClick:function(e){e.preventDefault(),console.log(e.lngLat),I(e.lngLat)}}))})," ",Object(b.jsx)("br",{})]})]})}le.a.setApiKey("AIzaSyBfG1BvX0ET5AGbzG9FvUiBqpA_S4AeXhk");var ue=n(48),be=n.n(ue),de=n(89),he=localStorage.getItem("authToken"),pe=u.a.create({baseURL:"https://seven-app-api.herokuapp.com",headers:{Authorization:"Bearer ".concat(he)}}),Oe=function(){var e=Object(de.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.get("/api/events");case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var xe=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(null),r=Object(l.a)(o,2),j=r[0],u=r[1],d=Object(a.useState)({weekday:null,category:"all"}),h=Object(l.a)(d,2),p=h[0],O=h[1],m=function(e,t){O({weekday:e,category:t||"all"});var n=Object(Y.a)(S);null!==e&&(n=n.filter((function(t){return t.date.weekday===e}))),"all"!==t&&(n=n.filter((function(e){return e.icon===t}))),u(n)},v=Object(s.h)().search,f=new URLSearchParams(v).get("view"),g=Object(M.useQuery)("dayEvents",Oe),S=g.data,w=g.status;return Object(a.useEffect)((function(){u(S)}),[S]),"loading"===w?Object(b.jsx)(x,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(y.a,{children:[Object(b.jsx)(H.a,{in:c,children:Object(b.jsxs)(y.a.Header,{children:[Object(b.jsx)(G,{parentCb:m,filterState:p}),Object(b.jsx)(K,{parentCb:m,filterState:p})]})}),Object(b.jsx)(V,{open:c,parentCb:i,textOpen:"Hide filters",textClosed:"Show filters"})]}),"map"===f?Object(b.jsx)(ie,{events:j}):Object(b.jsx)(ce,{events:j}),Object(b.jsx)(je,{})]})};var me=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(s.b,{exact:!0,path:"/",component:Q}),Object(b.jsxs)(s.d,{children:[Object(b.jsx)(B,{exact:!0,path:"/events",component:xe}),Object(b.jsx)(B,{exact:!0,path:"/events/:id",component:w}),Object(b.jsx)(B,{exact:!0,path:"/events/edit/:id",component:k}),Object(b.jsx)(B,{exact:!0,path:"/profile/:id",component:N}),Object(b.jsx)(B,{exact:!0,path:"/profile/edit",component:A}),Object(b.jsx)(R,{exact:!0,path:"/signup",component:_}),Object(b.jsx)(R,{exact:!0,path:"/login",component:L})]}),Object(b.jsx)(g,{})]})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,252)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))},fe=new M.QueryClient;o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(r.a,{children:Object(b.jsx)(h,{children:Object(b.jsx)(M.QueryClientProvider,{client:fe,children:Object(b.jsx)(me,{})})})})}),document.getElementById("root")),ve()}},[[228,1,2]]]);
//# sourceMappingURL=main.e00ce4d9.chunk.js.map